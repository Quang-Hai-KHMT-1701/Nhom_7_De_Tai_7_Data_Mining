# ğŸ“Š BÃO CÃO MINI PROJECT: PHÃ‚N Cá»¤M KHÃCH HÃ€NG Dá»°A TRÃŠN LUáº¬T Káº¾T Há»¢P

## ğŸ“‹ Tá»•ng Quan Dá»± Ãn

**Má»¥c tiÃªu**: PhÃ¢n cá»¥m (clustering) khÃ¡ch hÃ ng dá»±a trÃªn hÃ nh vi mua hÃ ng sá»­ dá»¥ng luáº­t káº¿t há»£p (Association Rules) tá»« thuáº­t toÃ¡n Apriori vÃ  FP-Growth.

**Dataset**: Online Retail Dataset (UK) - Dá»¯ liá»‡u giao dá»‹ch bÃ¡n láº» trá»±c tuyáº¿n.

**PhÆ°Æ¡ng phÃ¡p**:
1. Tiá»n xá»­ lÃ½ dá»¯ liá»‡u vÃ  phÃ¢n tÃ­ch EDA
2. Khai phÃ¡ luáº­t káº¿t há»£p (Apriori & FP-Growth)
3. XÃ¢y dá»±ng feature matrix tá»« luáº­t káº¿t há»£p + RFM
4. PhÃ¢n cá»¥m khÃ¡ch hÃ ng báº±ng K-Means
5. ÄÃ¡nh giÃ¡ vÃ  phÃ¢n tÃ­ch cluster

---

## 1ï¸âƒ£ So SÃ¡nh Há»‡ Thá»‘ng: Apriori vs FP-Growth

### 1.1. Grid Search Parameters

ChÃºng tÃ´i thá»±c hiá»‡n grid search trÃªn 3 chiá»u tham sá»‘:

| Tham sá»‘ | GiÃ¡ trá»‹ thá»­ nghiá»‡m | Ã nghÄ©a |
|---------|-------------------|---------|
| **Rules Source** | Apriori, FP-Growth | Thuáº­t toÃ¡n sinh luáº­t káº¿t há»£p |
| **Weighting** | none, lift, liftÃ—conf | CÃ¡ch Ä‘Ã¡nh trá»ng sá»‘ cho features |
| **Top-K** | 50, 100, 200 | Sá»‘ lÆ°á»£ng luáº­t sá»­ dá»¥ng |

### 1.2. Káº¿t Quáº£ Grid Search (18 thÃ­ nghiá»‡m)

| Rules Source | Weighting | Top-K | Best K | Silhouette |
|--------------|-----------|-------|--------|------------|
| **Apriori** | **lift** | **50** | **10** | **0.9933** â­ |
| FP-Growth | lift | 50 | 10 | 0.9933 |
| Apriori | liftÃ—conf | 50 | 10 | 0.9929 |
| FP-Growth | liftÃ—conf | 50 | 10 | 0.9929 |
| FP-Growth | liftÃ—conf | 100 | 2 | 0.9356 |
| Apriori | liftÃ—conf | 100 | 2 | 0.9356 |
| Apriori | lift | 100 | 2 | 0.9223 |
| FP-Growth | lift | 100 | 2 | 0.9223 |
| FP-Growth | liftÃ—conf | 200 | 2 | 0.8914 |
| Apriori | liftÃ—conf | 200 | 2 | 0.8914 |
| Apriori | lift | 200 | 2 | 0.8541 |
| FP-Growth | lift | 200 | 2 | 0.8541 |
| Apriori | none | 50 | 4 | 0.6845 |
| FP-Growth | none | 50 | 4 | 0.6845 |
| Apriori | none | 100 | 4 | 0.4830 |
| FP-Growth | none | 100 | 4 | 0.4830 |
| Apriori | none | 200 | 8 | 0.2856 |
| FP-Growth | none | 200 | 8 | 0.2856 |

### 1.3. PhÃ¢n TÃ­ch Káº¿t Quáº£ Grid Search

#### ğŸ“Œ Nháº­n xÃ©t quan trá»ng:

1. **Apriori vs FP-Growth cho káº¿t quáº£ GIá»NG NHAU**
   - Cáº£ hai thuáº­t toÃ¡n sinh ra cÃ¹ng táº­p luáº­t (khi cÃ¹ng tham sá»‘ min_support, min_confidence)
   - Äiá»u nÃ y chá»©ng minh tÃ­nh Ä‘Ãºng Ä‘áº¯n cá»§a cáº£ hai thuáº­t toÃ¡n
   - Sá»± khÃ¡c biá»‡t chá»‰ náº±m á»Ÿ **hiá»‡u nÄƒng** (FP-Growth nhanh hÆ¡n vá»›i dá»¯ liá»‡u lá»›n)

2. **Weighting cÃ³ áº£nh hÆ°á»Ÿng Ráº¤T Lá»šN**
   - `lift` vÃ  `liftÃ—conf`: Silhouette cao (0.85 - 0.99)
   - `none` (binary): Silhouette tháº¥p hÆ¡n nhiá»u (0.29 - 0.68)
   - **Giáº£i thÃ­ch**: Lift Ä‘o Ä‘á»™ "báº¥t ngá»" cá»§a luáº­t, giÃºp phÃ¢n biá»‡t khÃ¡ch hÃ ng theo hÃ nh vi mua Ä‘áº·c trÆ°ng

3. **Top-K Ã­t hÆ¡n cho káº¿t quáº£ Tá»T HÆ N**
   - Top-50: Silhouette 0.99 (tá»‘t nháº¥t)
   - Top-100: Silhouette 0.92-0.94
   - Top-200: Silhouette 0.85-0.89
   - **Giáº£i thÃ­ch**: Ãt luáº­t = chá»‰ giá»¯ luáº­t quan trá»ng nháº¥t = Ã­t nhiá»…u hÆ¡n

---

## 2ï¸âƒ£ Cáº¥u HÃ¬nh Tá»‘t Nháº¥t

### Tham sá»‘ Ä‘Æ°á»£c chá»n:

| Tham sá»‘ | GiÃ¡ trá»‹ | Ã nghÄ©a |
|---------|---------|---------|
| **Rules Source** | Apriori | Thuáº­t toÃ¡n sinh luáº­t |
| **Weighting** | lift | DÃ¹ng lift Ä‘á»ƒ Ä‘Ã¡nh trá»ng sá»‘ |
| **Top-K** | 50 | Sá»­ dá»¥ng 50 luáº­t cÃ³ lift cao nháº¥t |
| **Best K** | 10 | Sá»‘ cluster tá»‘i Æ°u |
| **Silhouette** | 0.9933 | Cháº¥t lÆ°á»£ng phÃ¢n cá»¥m ráº¥t cao |

### ğŸ“Š Giáº£i thÃ­ch Silhouette Score

**Silhouette Score** Ä‘o cháº¥t lÆ°á»£ng phÃ¢n cá»¥m, dao Ä‘á»™ng tá»« -1 Ä‘áº¿n +1:
- **+1**: Cluster hoÃ n háº£o (cÃ¡c Ä‘iá»ƒm trong cluster ráº¥t gáº§n nhau, xa cluster khÃ¡c)
- **0**: CÃ¡c cluster chá»“ng láº¥n
- **-1**: PhÃ¢n cá»¥m sai (Ä‘iá»ƒm náº±m nháº§m cluster)

**Score = 0.9933** âœ… NghÄ©a lÃ :
- CÃ¡c khÃ¡ch hÃ ng trong cÃ¹ng cluster cÃ³ hÃ nh vi Ráº¤T GIá»NG NHAU
- CÃ¡c cluster PHÃ‚N BIá»†T RÃ• RÃ€NG vá»›i nhau
- ÄÃ¢y lÃ  káº¿t quáº£ phÃ¢n cá»¥m XUáº¤T Sáº®C

### Silhouette theo K:

| K | Silhouette | ÄÃ¡nh giÃ¡ |
|---|------------|----------|
| 10 | 0.9933 | â­ Tá»‘t nháº¥t |
| 9 | 0.9931 | Ráº¥t tá»‘t |
| 8 | 0.9927 | Ráº¥t tá»‘t |
| 7 | 0.9925 | Ráº¥t tá»‘t |
| 6 | 0.9916 | Ráº¥t tá»‘t |
| 5 | 0.9894 | Tá»‘t |
| 4 | 0.9868 | Tá»‘t |
| 3 | 0.9855 | Tá»‘t |
| 2 | 0.9864 | Tá»‘t |

**Nháº­n xÃ©t**: Silhouette tÄƒng dáº§n khi K tÄƒng, Ä‘áº¡t cá»±c Ä‘áº¡i táº¡i K=10. Äiá»u nÃ y cho tháº¥y dá»¯ liá»‡u cÃ³ cáº¥u trÃºc phá»©c táº¡p vá»›i nhiá»u nhÃ³m khÃ¡ch hÃ ng nhá» Ä‘áº·c biá»‡t.

---

## 3ï¸âƒ£ PhÃ¢n Bá»‘ Cluster

### Káº¿t quáº£ phÃ¢n cá»¥m K=10:

| Cluster | Sá»‘ KH | Tá»· lá»‡ | Äáº·c Ä‘iá»ƒm |
|---------|-------|-------|----------|
| **0** | 3,788 | 96.6% | NhÃ³m khÃ¡ch hÃ ng chÃ­nh (mainstream) |
| **1** | 99 | 2.5% | KhÃ¡ch hÃ ng VIP |
| **2** | 6 | 0.2% | NhÃ³m Ä‘áº·c biá»‡t 2 |
| **3** | 7 | 0.2% | NhÃ³m Ä‘áº·c biá»‡t 3 |
| **4** | 3 | 0.1% | NhÃ³m Ä‘áº·c biá»‡t 4 |
| **5** | 7 | 0.2% | NhÃ³m Ä‘áº·c biá»‡t 5 |
| **6** | 4 | 0.1% | NhÃ³m Ä‘áº·c biá»‡t 6 |
| **7** | 3 | 0.1% | NhÃ³m Ä‘áº·c biá»‡t 7 |
| **8** | 3 | 0.1% | NhÃ³m Ä‘áº·c biá»‡t 8 |
| **9** | 1 | 0.0% | Outlier |

**Tá»•ng**: 3,921 khÃ¡ch hÃ ng

### ğŸ“Œ PhÃ¢n tÃ­ch phÃ¢n bá»‘:

**Hiá»‡n tÆ°á»£ng Long-tail Distribution**:
- 1 cluster lá»›n (96.6%) + nhiá»u cluster nhá»
- ÄÃ¢y lÃ  hiá»‡n tÆ°á»£ng phá»• biáº¿n trong retail data
- Cluster nhá» thÆ°á»ng chá»©a khÃ¡ch hÃ ng cÃ³ hÃ nh vi Äáº¶C BIá»†T (VIP, niche market)

---

## 4ï¸âƒ£ Cluster Profiling: PhÃ¢n TÃ­ch RFM

### RFM lÃ  gÃ¬?

| Metric | Ã nghÄ©a | CÃ¡ch tÃ­nh |
|--------|---------|-----------|
| **R**ecency | Gáº§n Ä‘Ã¢y | Sá»‘ ngÃ y tá»« láº§n mua cuá»‘i Ä‘áº¿n ngÃ y phÃ¢n tÃ­ch |
| **F**requency | Táº§n suáº¥t | Sá»‘ Ä‘Æ¡n hÃ ng cá»§a khÃ¡ch |
| **M**onetary | GiÃ¡ trá»‹ | Tá»•ng tiá»n khÃ¡ch Ä‘Ã£ chi |

### Báº£ng RFM theo Cluster:

| Cluster | Size | Recency (ngÃ y) | Frequency (Ä‘Æ¡n) | Monetary (Â£) |
|---------|------|----------------|-----------------|--------------|
| **0** | 3,788 (96.6%) | 93.26 | 4.04 | 1,808.41 |
| **1** | 99 (2.5%) | 59.48 | 25.38 | **21,284.50** â­ |
| **2** | 6 (0.2%) | 37.17 | 9.83 | 3,483.87 |
| **3** | 7 (0.2%) | 82.29 | 3.57 | 1,320.65 |
| **4** | 3 (0.1%) | 92.00 | 3.00 | 521.39 |
| **5** | 7 (0.2%) | 73.43 | 4.71 | 1,538.35 |
| **6** | 4 (0.1%) | 77.50 | 3.50 | 1,242.10 |
| **7** | 3 (0.1%) | 28.00 | 11.00 | 3,883.74 |
| **8** | 3 (0.1%) | **9.33** â­ | 7.33 | 2,774.11 |
| **9** | 1 (0.0%) | 277.00 | 1.00 | 391.52 |

### ğŸ“Š PhÃ¢n TÃ­ch Chi Tiáº¿t Tá»«ng Cluster:

#### ğŸ”µ **Cluster 0 - KhÃ¡ch HÃ ng Mainstream** (96.6%)
- **Recency**: 93 ngÃ y - Trung bÃ¬nh, khÃ´ng quÃ¡ gáº§n
- **Frequency**: 4 Ä‘Æ¡n - Mua thá»‰nh thoáº£ng
- **Monetary**: Â£1,808 - Chi tiÃªu vá»«a pháº£i
- **Äáº·c Ä‘iá»ƒm**: ÄÃ¢y lÃ  nhÃ³m khÃ¡ch hÃ ng phá»• thÃ´ng, mua sáº¯m bÃ¬nh thÆ°á»ng

#### ğŸŸ  **Cluster 1 - KhÃ¡ch HÃ ng VIP** (2.5%)
- **Recency**: 59 ngÃ y - Gáº§n Ä‘Ã¢y hÆ¡n trung bÃ¬nh
- **Frequency**: 25 Ä‘Æ¡n - **Mua NHIá»€U Gáº¤P 6 Láº¦N** so vá»›i Cluster 0!
- **Monetary**: Â£21,284 - **Chi tiÃªu Gáº¤P 12 Láº¦N** Cluster 0!
- **Äáº·c Ä‘iá»ƒm**: ÄÃ¢y lÃ  TOP CUSTOMERS cáº§n Ä‘Æ°á»£c chÄƒm sÃ³c Ä‘áº·c biá»‡t

#### ğŸŸ¢ **Cluster 2 - KhÃ¡ch HÃ ng Tiá»m NÄƒng** (0.2%)
- **Recency**: 37 ngÃ y - Ráº¥t gáº§n Ä‘Ã¢y
- **Frequency**: 10 Ä‘Æ¡n - Táº§n suáº¥t cao
- **Monetary**: Â£3,484 - Chi tiÃªu khÃ¡
- **Äáº·c Ä‘iá»ƒm**: KhÃ¡ch hÃ ng má»›i nhÆ°ng Ä‘ang tÄƒng trÆ°á»Ÿng

#### ğŸŸ¡ **Cluster 7 - KhÃ¡ch HÃ ng Active** (0.1%)
- **Recency**: 28 ngÃ y - Ráº¥t gáº§n Ä‘Ã¢y
- **Frequency**: 11 Ä‘Æ¡n - Mua thÆ°á»ng xuyÃªn
- **Monetary**: Â£3,884 - Chi tiÃªu tá»‘t
- **Äáº·c Ä‘iá»ƒm**: KhÃ¡ch hÃ ng Ä‘ang ráº¥t active, cáº§n maintain

#### ğŸ”´ **Cluster 8 - KhÃ¡ch HÃ ng Má»›i Hot** (0.1%)
- **Recency**: **9 ngÃ y** - Má»šI MUA Gáº¦N NHáº¤T!
- **Frequency**: 7 Ä‘Æ¡n - Äang tÄƒng
- **Monetary**: Â£2,774 - Chi tiÃªu khÃ¡
- **Äáº·c Ä‘iá»ƒm**: KhÃ¡ch hÃ ng má»›i nhÆ°ng Ä‘ang ráº¥t active, cÃ³ tiá»m nÄƒng thÃ nh VIP

#### âš« **Cluster 9 - Churned Customer** (0.0%)
- **Recency**: 277 ngÃ y - **ÄÃƒ LÃ‚U KHÃ”NG MUA**
- **Frequency**: 1 Ä‘Æ¡n - Chá»‰ mua 1 láº§n
- **Monetary**: Â£392 - Chi tiÃªu Ã­t
- **Äáº·c Ä‘iá»ƒm**: KhÃ¡ch hÃ ng Ä‘Ã£ rá»i bá» (churned)

---

## 5ï¸âƒ£ PCA Visualization

### Káº¿t quáº£ PCA:

| Component | Variance Explained | Ã nghÄ©a |
|-----------|-------------------|---------|
| PC1 | **93.29%** | ThÃ nh pháº§n chÃ­nh, phÃ¢n biá»‡t cluster lá»›n |
| PC2 | 1.87% | ThÃ nh pháº§n phá»¥ |
| **Tá»•ng** | **95.17%** | Giá»¯ láº¡i 95% thÃ´ng tin |

### ğŸ“Š PhÃ¢n tÃ­ch biá»ƒu Ä‘á»“ PCA:

- **PC1 (trá»¥c X)** giáº£i thÃ­ch 93.3% variance:
  - Cluster 0 (mainstream) náº±m á»Ÿ **bÃªn trÃ¡i** (PC1 tháº¥p)
  - Cluster 1 (VIP) náº±m á»Ÿ **bÃªn pháº£i** (PC1 cao)
  - â†’ PC1 chá»§ yáº¿u phÃ¢n biá»‡t **má»©c Ä‘á»™ active/chi tiÃªu** cá»§a khÃ¡ch hÃ ng

- **PC2 (trá»¥c Y)** giáº£i thÃ­ch 1.9% variance:
  - PhÃ¢n biá»‡t cÃ¡c cluster nhá» theo **loáº¡i hÃ nh vi mua** cá»¥ thá»ƒ
  - CÃ¡c cluster nhá» (2-9) phÃ¢n tÃ¡n theo trá»¥c Y

- **Cluster separation rÃµ rÃ ng**:
  - CÃ¡c cluster khÃ´ng chá»“ng láº¥n
  - Chá»©ng minh Silhouette score 0.99 lÃ  chÃ­nh xÃ¡c

---

## 6ï¸âƒ£ Káº¿t Luáº­n & Äá» Xuáº¥t Kinh Doanh

### ğŸ¯ Káº¿t Luáº­n ChÃ­nh:

1. **Thuáº­t toÃ¡n**: Apriori vÃ  FP-Growth cho káº¿t quáº£ giá»‘ng nhau
2. **Cáº¥u hÃ¬nh tá»‘i Æ°u**: Lift weighting + Top-50 rules + K=10
3. **Cháº¥t lÆ°á»£ng**: Silhouette = 0.9933 (xuáº¥t sáº¯c)
4. **Cáº¥u trÃºc khÃ¡ch hÃ ng**: 1 nhÃ³m lá»›n mainstream + nhiá»u nhÃ³m nhá» Ä‘áº·c biá»‡t

### ğŸ’¼ Äá» Xuáº¥t Marketing:

| Cluster | Chiáº¿n lÆ°á»£c | HÃ nh Ä‘á»™ng cá»¥ thá»ƒ |
|---------|------------|------------------|
| **0** (Mainstream) | Retention & Upsell | Email marketing, cross-sell sáº£n pháº©m liÃªn quan |
| **1** (VIP) | VIP Program | Æ¯u Ä‘Ã£i Ä‘áº·c biá»‡t, personal shopper, early access |
| **2, 7, 8** (Active) | Nurturing | ChÄƒm sÃ³c Ä‘á»ƒ convert thÃ nh VIP |
| **9** (Churned) | Win-back | Email "Come back" vá»›i discount lá»›n |

### ğŸ“ Files ÄÃ£ Export:

1. `clustering_comparison.csv` - Báº£ng so sÃ¡nh grid search
2. `customer_cluster_labels.csv` - Label cluster cho má»—i khÃ¡ch hÃ ng
3. `cluster_profiles_detailed.csv` - Chi tiáº¿t profile tá»«ng cluster
4. `silhouette_table.csv` - Báº£ng silhouette score
5. `silhouette_plot.png` - Biá»ƒu Ä‘á»“ silhouette
6. `pca_scatter.png` - Biá»ƒu Ä‘á»“ PCA scatter

---

## ğŸ“š Phá»¥ Lá»¥c: Giáº£i ThÃ­ch Thuáº­t Ngá»¯

### Association Rules:
- **Support**: Táº§n suáº¥t xuáº¥t hiá»‡n cá»§a itemset trong táº¥t cáº£ transactions
- **Confidence**: P(B|A) - XÃ¡c suáº¥t mua B khi Ä‘Ã£ mua A
- **Lift**: Confidence / P(B) - Äá»™ "báº¥t ngá»" cá»§a luáº­t
  - Lift > 1: Mua A lÃ m TÄ‚NG kháº£ nÄƒng mua B
  - Lift = 1: KhÃ´ng liÃªn quan
  - Lift < 1: Mua A lÃ m GIáº¢M kháº£ nÄƒng mua B

### Clustering Metrics:
- **Silhouette Score**: Äo Ä‘á»™ cháº·t cá»§a cluster vÃ  Ä‘á»™ tÃ¡ch biá»‡t giá»¯a cÃ¡c cluster
- **K-Means**: Thuáº­t toÃ¡n phÃ¢n cá»¥m dá»±a trÃªn centroid
- **PCA**: Giáº£m chiá»u dá»¯ liá»‡u Ä‘á»ƒ visualization

---

*BÃ¡o cÃ¡o Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng tá»« notebook `comprehensive_clustering_analysis.ipynb`*

*NgÃ y: 30/12/2024*
